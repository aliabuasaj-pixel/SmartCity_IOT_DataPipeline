๐๏ธ ูุดุฑูุน ููุญุฉ ูุคุดุฑุงุช ุงููุฏููุฉ ุงูุฐููุฉ - Smart City Dashboard
๐จโ๐ป ูุนูููุงุช ุงููุฌููุนุฉ

ุงูุทูุงุจ ุงููุดุงุฑููู:

ุนูู ุฃุจู ุนุณุงุฌ

ุบุงุฏุฉ ุงููุจูุจ

ุดูุฏ ุนุจุฏุงูุณูุงู

ุชุญุช ุฅุดุฑุงู ุงููููุฏุณ: ุนูุฑ ุฃุจู ุณูุฏ

๐ ูุตู ุงููุดุฑูุน

ูุฐุง ุงููุดุฑูุน ููุฏู ุฅูู ุจูุงุก ููุญุฉ ูุคุดุฑุงุช Dashboard ููุฏููุฉ ุฐููุฉ ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุญุณุงุณุงุช IoT.

ุชูุธูุฑ ุงูููุญุฉ ูุนูููุงุช ุญูู:

๐ ุฅุฌูุงูู ูุฑุงุกุงุช ุงูุญุณุงุณุงุช ุงูููููุฉ

๐ซ๏ธ ุชูุจููุงุช ุงูุชููุซ ุงูุดูุฑูุฉ

๐ก๏ธ ุฃูุถู 5 ุฃุฌูุฒุฉ ุญุฑุงุฑุฉ ููู ุดูุฑ

ุงุฎุชุฑูุง ูุฐุง ุงููุดุฑูุน ูุฃูู ูุฌูุน ุจูู ุชุญููู ุงูุจูุงูุงุชุ ุงููุนุงูุฌุฉ ุงูุชุฒุงูุฏูุฉุ ูุฅูุดุงุก Materialized Views (MV)ุ ููุทุจู ุนููููุง ููุงููู Big Dataุ Sparkุ MongoDB ูStreamlit.

๐๏ธ ูุตู ุงูุจูุงูุงุช
ุงูุฌุฏุงูู ูุงููุตุงุฏุฑ:

sensors: ุงูุจูุงูุงุช ุงูุฃูููุฉ ููู ุงูุญุณุงุณุงุช

ุงูุญููู: sensor_id, timestamp, temperature, humidity, pollution_level, traffic, power_usage

ุนุฏุฏ ุงูุณุฌูุงุช: 5,000,000+

Materialized Views (MV):

mv_daily_readings_per_device: ุฅุฌูุงูู ุงููุฑุงุกุงุช ุงูููููุฉ ููู ุญุณุงุณ

mv_monthly_pollution_alerts: ุชูุจููุงุช ุงูุชููุซ ุงูุดูุฑูุฉ

mv_top5_temp_devices_monthly: ุฃูุถู 5 ุฃุฌูุฒุฉ ุญุฑุงุฑุฉ ููู ุดูุฑ

mv_meta_state: ูุญุชูู ุนูู ููุงุท ุงูุชุญูู (checkpoints) ูุขุฎุฑ ููุช ุชุญุฏูุซ ููู MV

๐ ูููุงุช ุชูุซูู ุงูุจูุงูุงุช:

docs/data_dictionary.md

docs/validation_rules.json

docs/md.strategy_index

๐๏ธ ูููููุฉ ุงููุฌูุฏุงุช
SmartCity_IoT_DataPipeline/
โโ app/                 # ูุงุฌูุฉ Streamlit
โ   โโ app.py
โโ spark_jobs/          # ููุงู Spark ููุนุงูุฌุฉ ุงูุจูุงูุงุช
โ   โโ spark_ingest.py
โโ scripts/             # ุณูุฑูุจุชุงุช ุฅูุดุงุก MV ูุงูุชุญูู ูู ุงูุจูุงูุงุช
โ   โโ create_mv_daily_readings.py
โ   โโ create_mv_monthly_pollution_alerts.py
โ   โโ create_mv_top5_temp_devices_monthly.py
โ   โโ generate_json_data.py
โ   โโ validation_run.py
โ   โโ ...
โโ ingest_spark/        # ูููุงุช ingest ุนุจุฑ Spark
โโ ingest_json/         # ูููุงุช ingest ุจุตูุบุฉ JSON
โโ run_validation/      # ุณูุฑูุจุชุงุช ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
โโ aggregations/        # ุงูุชูุงุฑูุฑ ุงูุชุญููููุฉ ุงูุฎูุณุฉ
โโ logs/                # ูููุงุช ุงูุณุฌูุงุช ุงูุชูููุฐูุฉ
โโ docs/                # ูุณุชูุฏุงุช ูุฏููู ุงููุดุฑูุน
โโ requirements.txt     # ููุชุจุงุช Python ุงููุทููุจุฉ
โโ README.md            # ูุฐุง ุงูููู

![ูููู ุงููุดุฑูุน](docs/screenshots/structure_of_project.png)



๐งฉ ูุฑุงุญู ุงูุชูููุฐ
1๏ธโฃ ุฅุฏุฎุงู ุงูุจูุงูุงุช (Ingestion)
ุฅุฏุฎุงู JSON

ุงูุณูุฑูุจุช scripts/ingest_json.py ููุฑุฃ ุงููููุงุช ุจุตูุบุฉ JSON ุฃู JSONL ุนูู ุดูู ุฏูุนุงุช (chunks) ูููุชุจ ุงููููุงุช ุฅูู ูุฌูุฏ staging.

ุงูุญุฏ ุงูุฃุฏูู ููู ููู: 500,000 ุณุฌู.

2๏ธโฃ ุจูุงุจุฉ ุงูุชุญูู ูู ุงูุจูุงูุงุช (Validation Gate + Quarantine)

ุงูุณูุฑูุจุช scripts/validation_run.py ูุชุญูู ูู ุงูุจูุงูุงุช ุจูุงุกู ุนูู ุงูููุงุนุฏ ูู:
docs/validation_rules.json

ุงูุจูุงูุงุช ุงูุตุญูุญุฉ โ ุชูุชูู ุฅูู data/validated/

ุงูุจูุงูุงุช ุงููุงุณุฏุฉ ุฃู ุบูุฑ ุงููุทุงุจูุฉ โ ุชูุชูู ุฅูู data/quarantine/

ูุชู ุชุณุฌูู ุฌููุน ุงูุชูุงุตูู ูู logs/validation.log

3๏ธโฃ ุงูููุงุฑุณ ูุดุฑุญ ุงูุชูููุฐ (Indexing + Explain)

ูุฅูุดุงุก ููุงุฑุณ ุนูู MongoDB ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช ุนูู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงููุจูุฑุฉ.

ุงูููุงุฑุณ ุงููุณุชุฎุฏูุฉ:

_id ููู MV โ ูุชุณุฑูุน ุงููุฑุงุกุฉ/ุงููุชุงุจุฉ.

ููุฑุณ ูุฑูุจ (Compound Index) ุนูู sensor_id + day ููููุงููุณ ุงูููููุฉ.

ููุงุฑุณ ุงุฎุชูุงุฑูุฉ ุญุณุจ ุงูุญููู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง ูู ุงูุงุณุชุนูุงูุงุช.

ูุชุงุฆุฌ Explain ExecutionStats ูุญููุธุฉ ูู:
docs/explain_*

![ูุชุงุฆุฌ MongoDB](docs/screenshots/mongodb_results.png)


4๏ธโฃ Aggregations / ุงูุชูุงุฑูุฑ

ุชู ุชูููุฐ 5 ุชูุงุฑูุฑ ุชุฌููุนูุฉ (Aggregation Reports) ูุชุญููู ุงูุจูุงูุงุช ุงููุจูุฑุฉ:

Daily Readings per Device ๐

ุฅุฌูุงูู ุงููุฑุงุกุงุช ุงูููููุฉ ููู ุญุณุงุณ

Monthly Pollution Alerts ๐ซ๏ธ

ุนุฏุฏ ุงูุชูุจููุงุช ููู ุดูุฑุ ูุน ูุชูุณุท ุงูููู

Top 5 Temp Devices (Monthly) ๐ก๏ธ

ุฃุนูู 5 ุฃุฌูุฒุฉ ุญุฑุงุฑุฉ ููู ุดูุฑ

Invalid Records Count โ

ุนุฏุฏ ุงูุณุฌูุงุช ุบูุฑ ุงูุตุงูุญุฉ ููู ุญูู ุฑุฆูุณู

Power Usage Monthly Avg โก

ูุชูุณุท ุงุณุชููุงู ุงูุทุงูุฉ ููู ุฌูุงุฒ ุดูุฑููุง

ูู ุชูุฑูุฑ ููุฌูุฏ ูู aggregations/ ูุน ุณูุฑูุจุช ูุณุชูู ูุชุดุบููู.

5๏ธโฃ Materialized Views (MV) + ุงูุชุญุฏูุซ ุงูุชุฒุงูุฏู

ุชู ุฅูุดุงุก 3 ุนุฑูุถ ูุงุฏูุฉ (MV) ุจุงุณุชุฎุฏุงู MongoDB ูููุฒุฉ $merge ููุชุญุฏูุซ ุงูุชุฒุงูุฏู.

ุงูููุงุท ุงูุฑุฆูุณูุฉ:

mv_daily_readings_per_device โ _id = {sensor, day}

mv_monthly_pollution_alerts โ _id = {month}

mv_top5_temp_devices_monthly โ _id = {month}

ูู MV ูุญุชูู ุนูู checkpoint ู Safety Window ููุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุชุฃุฎุฑุฉ ุฏูู ููุฏุงู.

ุชุญุฏูุซ ุงูุนุฑูุถ ุงููุงุฏูุฉ ูุชู ุนุจุฑ:
jobs/refresh_mv.py

![ูุฌุงุญ ุฅูุดุงุก MV ูููู](docs/screenshots/mv_daily_readings_success.png)

![ูุฌุงุญ ุฅูุดุงุก MV ุงูุชููุซ ุงูุดูุฑู](docs/screenshots/mv_pollution_success.png)

![ูุฌุงุญ ุฅูุดุงุก MV ุฃูุถู 5 ุฃุฌูุฒุฉ ุญุฑุงุฑุฉ](docs/screenshots/mv_top5_success.png)




ุณุฌูุงุช ุงูุชุดุบูู ูุญููุธุฉ ูู ูุฌูุฏ logs/

6๏ธโฃ ููุญุฉ ุงููุคุดุฑุงุช (Dashboard)

ุงูุชุทุจูู ุงูุชูุงุนูู ูู: app/app.py ุจุงุณุชุฎุฏุงู Streamlit.

ุชุนุฑุถ 3 ุจุทุงูุงุช KPIs:

ุฅุฌูุงูู ุงููุฑุงุกุงุช ุงูููููุฉ ููู ุญุณุงุณ

ุชูุจููุงุช ุงูุชููุซ ุงูุดูุฑูุฉ

ุฃูุถู 5 ุฃุฌูุฒุฉ ุญุฑุงุฑุฉ

ุชุนุฑุถ ุฃูุถูุง ุขุฎุฑ ููุช ุชุญุฏูุซ ูุฃุฎูุฐ ูู mv_meta_state.

![ููุญุฉ ุงููุคุดุฑุงุช](docs/screenshots/dashboard_view.png)


ูุชุทูุจุงุช ุงูุชุดุบูู โ๏ธ

Python: 3.11+

Apache Spark: 3.4+

MongoDB: 8+

ุงูููุชุจุงุช: ููุฌูุฏุฉ ูู requirements.txtุ ุชุดูู:

streamlit

pandas

pymongo

plotly

datetime
